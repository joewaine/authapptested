{"version":3,"sources":["webpack:///./src/components/Transactions.vue?e670","webpack:///./src/views/transactions.vue?058e","webpack:///./src/views/transactions.vue?d23f","webpack:///./src/components/Transactions.vue?dc24","webpack:///./src/components/AllTransactions.vue?d462","webpack:///src/components/AllTransactions.vue","webpack:///./src/components/AllTransactions.vue?b6a8","webpack:///./src/components/AllTransactions.vue","webpack:///src/components/Transactions.vue","webpack:///./src/components/Transactions.vue?b429","webpack:///./src/components/Transactions.vue","webpack:///src/views/transactions.vue","webpack:///./src/views/transactions.vue?8039","webpack:///./src/views/transactions.vue","webpack:///./src/components/AllTransactions.vue?f899"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","attrs","_v","on","logUserOut","directives","name","rawName","value","expression","domProps","$event","target","composing","externalTransactionId","retrievePoll","pollResults","_e","_s","setCurrentView","orderhistory","user","length","_l","slice","reverse","order","key","_id","currentView","orderInfo","restaurant","confirmation_code","preorder","_f","scheduled_time","time_placed","charges","total","items","payInfo","void","issueVoid","data","uniqueTransId","email","fulfillment_info","customer","first_name","toggleOrder","id","item","cartId","staticStyle","quantity","price","toFixed","issueTokenizedReturn","taxes","preTotal","tz","format","showToFixed","retrieveOrders","self","response","console","$http","log","uniqueTransIdString","voidByTransId","component","components","methods","localStorage","removeItem","$router","push","Nav3","Transactions"],"mappings":"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","file":"js/chunk-d7183d48.907e164a.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Transactions.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Transactions.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./transactions.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./transactions.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"profile\"},[_c('Nav3'),_c('Transactions')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('div',{staticClass:\"container nav-acc-header pad-yellow-background\"},[_c('ul',{staticClass:\"navbar-nav\"},[_c('li',[_c('router-link',{attrs:{\"to\":\"/packages\"}},[_vm._v(\"packages\")])],1),_c('li',[_c('router-link',{attrs:{\"to\":\"/admin\"}},[_vm._v(\"go to retail admin\")])],1),_c('li',{staticClass:\"nav-item active\"},[_c('button',{staticClass:\"nav-link\",on:{\"click\":_vm.logUserOut}},[_vm._v(\" Logout\")])])]),_c('AllTransactions'),_c('div',[_vm._v(\" polling: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.externalTransactionId),expression:\"externalTransactionId\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.externalTransactionId)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.externalTransactionId=$event.target.value}}}),_c('button',{on:{\"click\":function($event){return _vm.retrievePoll(_vm.externalTransactionId)}}},[_vm._v(\" retrieve \")]),_c('br'),(_vm.pollResults === '{}'\n)?_c('div'):_vm._e(),_c('pre',[_vm._v(\"  \"+_vm._s(_vm.pollResults)+\"\\n\")])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container pad-yellow-background pd50\"},[_c('br'),_c('br'),_c('button',{on:{\"click\":function($event){return _vm.setCurrentView('Mamnoon')}}},[_vm._v(\"mamnoon\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.setCurrentView('Mamnoon Street')}}},[_vm._v(\"mamnoon street\")]),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.setCurrentView('empty')}}},[_vm._v(\"all\")]),_c('br'),_c('br'),_c('h1',[_vm._v(\"number of orders: \"+_vm._s(_vm.orderhistory.user.length))]),_c('br'),_c('br'),_vm._v(\" order history: \"),_c('hr'),_c('br'),_vm._l((_vm.orderhistory.user.slice().reverse()),function(order){return _c('div',{key:order._id,staticClass:\"position-relative\"},[(_vm.currentView === order.orderInfo.restaurant|| _vm.currentView === 'empty')?[_vm._v(\" confirmation code: \"+_vm._s(order.orderInfo.confirmation_code)+\" \"),_c('br'),_c('br'),_vm._v(\" preorder? \"+_vm._s(order.orderInfo.preorder)+\" \"),_c('br'),(order.orderInfo.preorder)?[_c('br'),_vm._v(\" scheduled time: \"+_vm._s(_vm._f(\"formatDate\")(order.orderInfo.scheduled_time))+\" \")]:_vm._e(),_c('br'),_vm._v(\" time placed: \"+_vm._s(_vm._f(\"formatDate\")(order.orderInfo.time_placed))+\" \"),_c('br'),_vm._v(\" $\"+_vm._s(_vm._f(\"showToFixed\")(order.orderInfo.charges.total))+\" \"),_c('br'),_vm._v(\" \"+_vm._s(order.orderInfo.restaurant)+\" \"),_c('br'),_vm._v(\" item amount: \"+_vm._s(order.orderInfo.charges.items.length)+\" \"),_c('br'),(order.payInfo.data)?[(!order.void)?_c('button',{staticClass:\"fl-right\",on:{\"click\":function($event){return _vm.issueVoid(order.payInfo.data.uniqueTransId,true)}}},[_vm._v(\"void\")]):_c('h1',[_vm._v(\"VOID\")])]:_vm._e(),(order.payInfo.uniqueTransId)?[(!order.void)?_c('button',{staticClass:\"fl-right\",on:{\"click\":function($event){return _vm.issueVoid(order.payInfo.uniqueTransId,false)}}},[_vm._v(\"void\")]):_c('h1',[_vm._v(\"VOID\")])]:_vm._e(),_c('br'),_c('b',[_vm._v(_vm._s(order.email))]),_vm._v(\" \"),_c('br'),_vm._v(\"guest name: \"+_vm._s(order.orderInfo.fulfillment_info.customer.first_name)+\" \"),_c('br'),_c('br'),_c('button',{on:{\"click\":function($event){return _vm.toggleOrder(order.orderInfo.id)}}},[_vm._v(\"show/hide full order data\")]),_c('pre',{staticClass:\"hidden\",attrs:{\"id\":'order-' + order.orderInfo.id}},[_vm._v(\"  \"+_vm._s(order)+\"\\n\")]),_c('br'),_c('br'),_c('ul',{staticClass:\"no-left-pad\"},_vm._l((order.orderInfo.charges.items),function(item){return _c('li',{key:item.cartId,staticStyle:{\"margin-bottom\":\"30px\"}},[_c('b',[_vm._v(_vm._s(item.quantity)+\" x\")]),_vm._v(\" \"+_vm._s(item.name)+\" \"),_c('b',[_vm._v(\"$\"+_vm._s(item.price.toFixed()/100))]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),(item.returned)?[_c('span',[_vm._v(\"(returned)\")])]:[(order.payInfo.data)?[(!order.void)?_c('span',{staticClass:\"line-link\",on:{\"click\":function($event){return _vm.issueTokenizedReturn(order.payInfo.data.uniqueTransId,item.price,order.orderInfo.charges.taxes/order.orderInfo.charges.preTotal,item.cartId,order._id)}}},[_c('u',[_vm._v(\"issue return\")])]):_vm._e()]:_vm._e(),(order.payInfo.uniqueTransId)?[(!order.void)?_c('span',{staticClass:\"line-link\",on:{\"click\":function($event){return _vm.issueTokenizedReturn(order.payInfo.uniqueTransId,item.price,order.orderInfo.charges.taxes/order.orderInfo.charges.preTotal,item.cartId,order._id)}}},[_c('u',[_vm._v(\"issue return\")])]):_vm._e()]:_vm._e()]],2)}),0),_c('br'),_c('hr')]:_vm._e()],2)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"container pad-yellow-background pd50\">\n<!-- {{currentUser.currentUserEmail}} -->\n<br>\n\n<br>\n<button @click=\"setCurrentView('Mamnoon')\">mamnoon</button> <button @click=\"setCurrentView('Mamnoon Street')\">mamnoon street</button> <button @click=\"setCurrentView('empty')\">all</button>\n<br>\n\n\n\n<br>\n<!-- {{response}} -->\n<h1>number of orders: {{orderhistory.user.length}}</h1>\n<br>\n<br>\norder history:\n<hr>\n\n<br>\n<div v-for=\"order in orderhistory.user.slice().reverse()\" :key=\"order._id\" class=\"position-relative\">\n\n<template v-if=\"currentView === order.orderInfo.restaurant|| currentView === 'empty'\">\n\n\n  confirmation code: {{order.orderInfo.confirmation_code}}\n\n<!-- {{order.payInfo.externalTransactionId}} -->\n<br><br>\npreorder? {{order.orderInfo.preorder}}\n<br>\n<template v-if=\"order.orderInfo.preorder\">\n<br>\nscheduled time: {{order.orderInfo.scheduled_time | formatDate}}\n</template>\n<br>\ntime placed: {{ order.orderInfo.time_placed | formatDate }}\n<br>\n${{order.orderInfo.charges.total | showToFixed}}\n<br>\n{{order.orderInfo.restaurant}}\n<br>\nitem amount: {{order.orderInfo.charges.items.length}}\n<br>\n\n<!-- <pre> -->\n<!-- {{order.payInfo}} -->\n<!-- </pre> -->\n<!--// {{order.void}}-->\n\n<template v-if=\"order.payInfo.data\">\n<button class=\"fl-right\" v-if=\"!order.void\" @click=\"issueVoid(order.payInfo.data.uniqueTransId,true)\">void</button>\n<h1 v-else>VOID</h1>\n\n\n\n</template>\n\n<template v-if=\"order.payInfo.uniqueTransId\">\n<!-- {{order.void}} -->\n<button class=\"fl-right\" v-if=\"!order.void\" @click=\"issueVoid(order.payInfo.uniqueTransId,false)\">void</button>\n<h1 v-else>VOID</h1>\n\n</template>\n\n\n\n<br>\n<b>{{order.email}}</b>\n&nbsp;&nbsp;\n<br>guest name: {{order.orderInfo.fulfillment_info.customer.first_name}}\n<br>\n<br>\n<button @click=\"toggleOrder(order.orderInfo.id)\">show/hide full order data</button>\n\n<pre :id=\"'order-' + order.orderInfo.id\" class=\"hidden\">\n  {{order}}\n</pre>\n<br>\n\n<!-- <template v-if=\"order.payInfo.externalTransactionId\">\ndebit/credit purchase (id: {{order.payInfo.externalTransactionId}})\n</template>\n<template v-else>\ngiftcard purchase\n</template> -->\n<br>  \n<ul class=\"no-left-pad\">\n<li v-for=\"item in order.orderInfo.charges.items\" :key=\"item.cartId\" style=\"margin-bottom:30px;\">\n<b>{{item.quantity}} x</b> {{item.name}}&nbsp;&nbsp;&nbsp;<b>${{item.price.toFixed()/100}}</b>&nbsp;&nbsp;&nbsp;\n<br>  \n&nbsp;&nbsp;\n&nbsp;&nbsp;\n  <template v-if=\"item.returned\">\n  <span>(returned)</span>\n  </template>\n  <template v-else>\n\n\n\n<template v-if=\"order.payInfo.data\">\n<!-- {{order.payInfo.data.uniqueTransId}} -->\n\n<span class=\"line-link\" v-if=\"!order.void\" @click=\"issueTokenizedReturn(order.payInfo.data.uniqueTransId,item.price,order.orderInfo.charges.taxes/order.orderInfo.charges.preTotal,item.cartId,order._id)\"><u>issue return</u></span>\n</template>\n\n<template v-if=\"order.payInfo.uniqueTransId\">\n<!-- {{order.payInfo.uniqueTransId}} -->\n\n<span class=\"line-link\" v-if=\"!order.void\" @click=\"issueTokenizedReturn(order.payInfo.uniqueTransId,item.price,order.orderInfo.charges.taxes/order.orderInfo.charges.preTotal,item.cartId,order._id)\"><u>issue return</u></span>\n\n</template>\n\n  </template>\n\n</li>\n</ul>\n<br>\n\n<hr>\n\n\n</template>\n</div>\n\n\n</div>\n</template>\n\n<script>  \n\n\nimport moment from 'moment'\nimport tz from 'moment-timezone'\n\n\n\nexport default {\n    data( ) {\n    return {\n        orderhistory: null,\n        response: null,\n            currentView: 'empty'\n        }\n    },\n    name: 'OrderHistory',\n    props: ['currentUser'],\n    filters: {\n\n  formatDate(value) {\n  if (value) {\n        let order = moment(String(value));\n        return order.tz('America/Los_Angeles').format('LLLL');\n  }\n},\n\n    showToFixed: function (value) {\n    let decvalue = value/100\n\n    return decvalue.toFixed(2)\n}\n    },\n    methods: {\nsetCurrentView(param){\n\n  this.currentView = param;\n  \n},\ntoggleOrder(id){\n\n\nlet drawer = document.getElementById('order-'+id)\n\n\n// console.log(document.getElementById('order-'+id))\n\nif (drawer.classList.contains('hidden')) {\n    // do some stuff\n\n    drawer.classList.remove(\"hidden\");\n}else{\n    drawer.classList.add(\"hidden\");\n}\n\n\n\n},\n    retrieveOrders() {\n    let self = this\n        this.$http.get(`/order/orderhistory/`).then(function (response) {\n        self.orderhistory = response.data\n    })\n    },\n        issueTokenizedReturn(uniqueTransIdString,amount,taxRate,cartId,orderId) {\n\n// console.log(taxRate);\n\n\nlet tax = amount * taxRate\n\nlet amountToCalcWithTax = amount + tax\n\n\nconsole.log(amountToCalcWithTax);\n\nlet amountDiv100 = amountToCalcWithTax/100\nlet amountToSend = amountDiv100.toFixed(2).toString()\n\nconsole.log(amountDiv100.toFixed(2).toString())\n\nconsole.log(amountToSend)\n\n      this.$http\n        .post(\"/order/issue-tokenized-return\", {\n            uniqueTransId: uniqueTransIdString,\n            amount: amountToSend\n          }\n          )\n        .then((response) => {\n            console.log(response)\n\n                this.$http\n                  .post(\"/order/update-refunded-items\", {\n                      cartId: cartId,\n                      orderId: orderId\n                    }\n                    )\n                  .then((response) => {\n                    console.log(response)\n\n                    this.retrieveOrders()\n\n                  })\n                  .catch((e) => {\n                    // this.errors.push(e);\n                    console.log(\"errors\");\n                    console.log(e);\n                  });\n\n        })\n        .catch((e) => {\n          // this.errors.push(e);\n          console.log(\"errors\");\n          console.log(e);\n        });\n    },\n    issueVoid(uniqueTransIdString,data) {\n\n      console.log(uniqueTransIdString)\n      this.$http\n        .post(\"/order/issue-void\", {\n            uniqueTransId: uniqueTransIdString,\n            data\n          }\n          )\n        .then((response) => {\n        console.log(response)\n\n\n      this.voidByTransId(uniqueTransIdString,data)\n\n        })\n        .catch((e) => {\n          // this.errors.push(e);\n          console.log(\"errors\");\n          console.log(e);\n        });\n    },\n    voidByTransId(uniqueTransIdString,data){\n\n      console.log(uniqueTransIdString)\n      this.$http\n        .post(\"/order/void-transid\", {\n            uniqueTransId: uniqueTransIdString,\n            data\n          }\n          )\n        .then((response) => {\n        console.log(response)\n\n\n// location.reload();\nthis.retrieveOrders()\n\n        })\n        .catch((e) => {\n          // this.errors.push(e);\n          console.log(\"errors\");\n          console.log(e);\n        });\n\n\n\n    }\n    },\n    mounted(){\n        this.retrieveOrders()\n    }\n\n}\n\n</script>\n\n<style lang=\"scss\">\n.position-relative{\n\n\nh1{\n    position: absolute;\n    right: 0;\n    top: 0;\n}\n\n}\n\n\n\n.no-left-pad{\n  padding-left: 0;\n}\n\n\npre.hidden{\n  display: none;\n}\n.line-link{\n  cursor: pointer;\n\n}\n</style>\n\n\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTransactions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTransactions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AllTransactions.vue?vue&type=template&id=60d3cdc0&\"\nimport script from \"./AllTransactions.vue?vue&type=script&lang=js&\"\nexport * from \"./AllTransactions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AllTransactions.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\n    <div>    <div>\n        <!-- <button class=\"btn btn-primary right-hide-modal\" @click=\"hideUserModal\">hide</button> -->\n        <div class=\"container nav-acc-header pad-yellow-background\">\n          <ul class=\"navbar-nav\">\n              <li>\n              <router-link to=\"/packages\">packages</router-link>\n            </li>\n            <li>\n              <router-link to=\"/admin\">go to retail admin</router-link>\n            </li>\n                <!-- <li>\n              <router-link to=\"/upserveinfo\">upserve info</router-link>\n            </li>-->\n            <li class=\"nav-item active\">\n              <button class=\"nav-link\" @click=\"logUserOut\"> Logout</button>\n            </li>\n          </ul>\n        <AllTransactions />\n          <div>\n\npolling:\n\n<input type=\"text\" v-model=\"externalTransactionId\" />\n<button @click=\"retrievePoll(externalTransactionId)\">\nretrieve\n</button>\n<br>\n<div v-if=\"pollResults === '{}'\n\">\n\n</div>\n<pre>\n  {{pollResults}}\n</pre>\n\n          </div>\n    </div>\n        </div>\n      \n        </div>\n</template>\n\n<script type=\"text/javascript\">\n\nimport AllTransactions from \"@/components/AllTransactions\";\nimport VueJwtDecode from \"vue-jwt-decode\";\n\n\nexport default {\nname: 'UserProfile',\ndata () {\nreturn {\nexternalTransactionId: '',\npollResults: {}\n}\n},\n  components: {\n\n   AllTransactions\n  },\n  methods:{\n        logUserOut() {\n      localStorage.removeItem(\"jwt\");\n      this.$router.push(\"/\");\n    },\nretrievePoll(suppliedId){\nconsole.log(suppliedId)\n// Optionally the request above could also be done as\n\nlet self = this\n\nthis.$http.get('/order/polling-request', {\n    params: {\n   externalTransactionId: suppliedId\n    }\n  })\n  .then(function (response) {\n    console.log(response);\n    self.pollResults = response\n  })\n  .catch(function (error) {\n    console.log(error);\n  })\n\n\n}\n\n  }\n\n}\n</script>\n\n<style lang=\"scss\">\n.fixed-profile{\n    position: fixed;\n    top: 142px;\n    width: 100%;\n    background: #ffffff;\n    padding: 30px 0;\n    z-index: 99;\n    height: 100vh;\n}\n\n\n.right-hide-modal{\n    float: right;\n    margin-right: 20px;\n}\n\n.pad-yellow-background{\n    // background: #fff367;\n    padding: 20px 30px;\n    margin-bottom: 20px;\n}\n\n.container.pad-yellow-background{\n  padding-left: 0 !important;\n  padding-right: 0 !important;\n}\n\n\n@media only screen and (max-width: 1080px) {\n  .fixed-profile{\n    top: 92px;\n}  \n}\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Transactions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Transactions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Transactions.vue?vue&type=template&id=14a543c8&\"\nimport script from \"./Transactions.vue?vue&type=script&lang=js&\"\nexport * from \"./Transactions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Transactions.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"profile\">\n    <Nav3 />\n       <Transactions />\n \n  </div>\n</template>\n<script>\n\nimport Nav3 from \"@/components/Nav3\";\nimport Transactions from \"@/components/Transactions\";\nexport default {\n          metaInfo: {\n      // if no subcomponents specify a metaInfo.title, this title will be used\n      title: 'transactions',\n      // all titles will be injected into this template\n      titleTemplate: '%s | nadi mama'\n  },\n  components: {\n\n    Nav3,\n    Transactions\n\n  },\n//     mounted () {\n// if(!this.$store.state.loggedIn){\n//       this.$router.push(\"/\");\n// }\n//   },\n};\n</script>\n\n<style>\n.profile{\n    padding-top: 120px;\n        padding-top: 150px;\n    padding-bottom: 120px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./transactions.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./transactions.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./transactions.vue?vue&type=template&id=42e003ca&\"\nimport script from \"./transactions.vue?vue&type=script&lang=js&\"\nexport * from \"./transactions.vue?vue&type=script&lang=js&\"\nimport style0 from \"./transactions.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTransactions.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AllTransactions.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}