(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7183d48"],{1526:function(e,t,n){},"5a0a":function(e,t,n){},"6ce5":function(e,t,n){"use strict";var r=n("1526"),o=n.n(r);o.a},"7ffc":function(e,t,n){},"93f9":function(e,t,n){"use strict";var r=n("5a0a"),o=n.n(r);o.a},f673:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile"},[n("Nav3"),n("Transactions")],1)},o=[],s=n("0caa"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("div",{staticClass:"container nav-acc-header pad-yellow-background"},[n("ul",{staticClass:"navbar-nav"},[n("li",[n("router-link",{attrs:{to:"/packages"}},[e._v("packages")])],1),n("li",[n("router-link",{attrs:{to:"/admin"}},[e._v("go to retail admin")])],1),n("li",{staticClass:"nav-item active"},[n("button",{staticClass:"nav-link",on:{click:e.logUserOut}},[e._v(" Logout")])])]),n("AllTransactions"),n("div",[e._v(" polling: "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.externalTransactionId,expression:"externalTransactionId"}],attrs:{type:"text"},domProps:{value:e.externalTransactionId},on:{input:function(t){t.target.composing||(e.externalTransactionId=t.target.value)}}}),n("button",{on:{click:function(t){return e.retrievePoll(e.externalTransactionId)}}},[e._v(" retrieve ")]),n("br"),"{}"===e.pollResults?n("div"):e._e(),n("pre",[e._v("  "+e._s(e.pollResults)+"\n")])])],1)])])},a=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container pad-yellow-background pd50"},[n("br"),n("br"),n("button",{on:{click:function(t){return e.setCurrentView("Mamnoon")}}},[e._v("mamnoon")]),e._v(" "),n("button",{on:{click:function(t){return e.setCurrentView("Mamnoon Street")}}},[e._v("mamnoon street")]),e._v(" "),n("button",{on:{click:function(t){return e.setCurrentView("empty")}}},[e._v("all")]),n("br"),n("br"),n("h1",[e._v("number of orders: "+e._s(e.orderhistory.user.length))]),n("br"),n("br"),e._v(" order history: "),n("hr"),n("br"),e._l(e.orderhistory.user.slice().reverse(),(function(t){return n("div",{key:t._id,staticClass:"position-relative"},[e.currentView===t.orderInfo.restaurant||"empty"===e.currentView?[e._v(" confirmation code: "+e._s(t.orderInfo.confirmation_code)+" "),n("br"),n("br"),e._v(" preorder? "+e._s(t.orderInfo.preorder)+" "),n("br"),t.orderInfo.preorder?[n("br"),e._v(" scheduled time: "+e._s(e._f("formatDate")(t.orderInfo.scheduled_time))+" ")]:e._e(),n("br"),e._v(" time placed: "+e._s(e._f("formatDate")(t.orderInfo.time_placed))+" "),n("br"),e._v(" $"+e._s(e._f("showToFixed")(t.orderInfo.charges.total))+" "),n("br"),e._v(" "+e._s(t.orderInfo.restaurant)+" "),n("br"),e._v(" item amount: "+e._s(t.orderInfo.charges.items.length)+" "),n("br"),t.payInfo.data?[t.void?n("h1",[e._v("VOID")]):n("button",{staticClass:"fl-right",on:{click:function(n){return e.issueVoid(t.payInfo.data.uniqueTransId,!0)}}},[e._v("void")])]:e._e(),t.payInfo.uniqueTransId?[t.void?n("h1",[e._v("VOID")]):n("button",{staticClass:"fl-right",on:{click:function(n){return e.issueVoid(t.payInfo.uniqueTransId,!1)}}},[e._v("void")])]:e._e(),n("br"),n("b",[e._v(e._s(t.email))]),e._v(" "),n("br"),e._v("guest name: "+e._s(t.orderInfo.fulfillment_info.customer.first_name)+" "),n("br"),n("br"),n("button",{on:{click:function(n){return e.toggleOrder(t.orderInfo.id)}}},[e._v("show/hide full order data")]),n("pre",{staticClass:"hidden",attrs:{id:"order-"+t.orderInfo.id}},[e._v("  "+e._s(t)+"\n")]),n("br"),n("br"),n("ul",{staticClass:"no-left-pad"},e._l(t.orderInfo.charges.items,(function(r){return n("li",{key:r.cartId,staticStyle:{"margin-bottom":"30px"}},[n("b",[e._v(e._s(r.quantity)+" x")]),e._v(" "+e._s(r.name)+" "),n("b",[e._v("$"+e._s(r.price.toFixed()/100))]),e._v(" "),n("br"),e._v(" "),r.returned?[n("span",[e._v("(returned)")])]:[t.payInfo.data?[t.void?e._e():n("span",{staticClass:"line-link",on:{click:function(n){return e.issueTokenizedReturn(t.payInfo.data.uniqueTransId,r.price,t.orderInfo.charges.taxes/t.orderInfo.charges.preTotal,r.cartId,t._id)}}},[n("u",[e._v("issue return")])])]:e._e(),t.payInfo.uniqueTransId?[t.void?e._e():n("span",{staticClass:"line-link",on:{click:function(n){return e.issueTokenizedReturn(t.payInfo.uniqueTransId,r.price,t.orderInfo.charges.taxes/t.orderInfo.charges.preTotal,r.cartId,t._id)}}},[n("u",[e._v("issue return")])])]:e._e()]],2)})),0),n("br"),n("hr")]:e._e()],2)}))],2)},l=[],u=(n("b680"),n("d3b7"),n("25f0"),n("c1df")),d=n.n(u),f=(n("7f45"),{data:function(){return{orderhistory:null,response:null,currentView:"empty"}},name:"OrderHistory",props:["currentUser"],filters:{formatDate:function(e){if(e){var t=d()(String(e));return t.tz("America/Los_Angeles").format("LLLL")}},showToFixed:function(e){var t=e/100;return t.toFixed(2)}},methods:{setCurrentView:function(e){this.currentView=e},toggleOrder:function(e){var t=document.getElementById("order-"+e);t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden")},retrieveOrders:function(){var e=this;this.$http.get("/order/orderhistory/").then((function(t){e.orderhistory=t.data}))},issueTokenizedReturn:function(e,t,n,r,o){var s=this,i=t*n,a=t+i;console.log(a);var c=a/100,l=c.toFixed(2).toString();console.log(c.toFixed(2).toString()),console.log(l),this.$http.post("/order/issue-tokenized-return",{uniqueTransId:e,amount:l}).then((function(e){console.log(e),s.$http.post("/order/update-refunded-items",{cartId:r,orderId:o}).then((function(e){console.log(e),s.retrieveOrders()})).catch((function(e){console.log("errors"),console.log(e)}))})).catch((function(e){console.log("errors"),console.log(e)}))},issueVoid:function(e,t){var n=this;console.log(e),this.$http.post("/order/issue-void",{uniqueTransId:e,data:t}).then((function(r){console.log(r),n.voidByTransId(e,t)})).catch((function(e){console.log("errors"),console.log(e)}))},voidByTransId:function(e,t){var n=this;console.log(e),this.$http.post("/order/void-transid",{uniqueTransId:e,data:t}).then((function(e){console.log(e),n.retrieveOrders()})).catch((function(e){console.log("errors"),console.log(e)}))}},mounted:function(){this.retrieveOrders()}}),v=f,_=(n("fc3f"),n("2877")),p=Object(_["a"])(v,c,l,!1,null,null,null),h=p.exports,m=(n("48ac"),{name:"UserProfile",data:function(){return{externalTransactionId:"",pollResults:{}}},components:{AllTransactions:h},methods:{logUserOut:function(){localStorage.removeItem("jwt"),this.$router.push("/")},retrievePoll:function(e){console.log(e);var t=this;this.$http.get("/order/polling-request",{params:{externalTransactionId:e}}).then((function(e){console.log(e),t.pollResults=e})).catch((function(e){console.log(e)}))}}}),g=m,I=(n("6ce5"),Object(_["a"])(g,i,a,!1,null,null,null)),b=I.exports,T={metaInfo:{title:"transactions",titleTemplate:"%s | nadi mama"},components:{Nav3:s["a"],Transactions:b}},k=T,y=(n("93f9"),Object(_["a"])(k,r,o,!1,null,null,null));t["default"]=y.exports},fc3f:function(e,t,n){"use strict";var r=n("7ffc"),o=n.n(r);o.a}}]);
//# sourceMappingURL=chunk-d7183d48.2fdddf18.js.map