(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7183d48"],{1526:function(t,n,e){},"5a0a":function(t,n,e){},"6ce5":function(t,n,e){"use strict";var o=e("1526"),r=e.n(o);r.a},"7ffc":function(t,n,e){},"93f9":function(t,n,e){"use strict";var o=e("5a0a"),r=e.n(o);r.a},f673:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"profile"},[e("Nav"),e("Transactions")],1)},r=[],s=e("216c"),i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("div",[e("div",{staticClass:"container nav-acc-header pad-yellow-background"},[e("ul",{staticClass:"navbar-nav"},[e("li",{staticClass:"nav-item active"},[e("button",{staticClass:"nav-link",on:{click:t.logUserOut}},[t._v(" Logout")])])]),e("AllTransactions"),e("div",[t._v(" polling: "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.externalTransactionId,expression:"externalTransactionId"}],attrs:{type:"text"},domProps:{value:t.externalTransactionId},on:{input:function(n){n.target.composing||(t.externalTransactionId=n.target.value)}}}),e("button",{on:{click:function(n){return t.retrievePoll(t.externalTransactionId)}}},[t._v(" retrieve ")]),e("br"),"{}"===t.pollResults?e("div"):t._e(),e("pre",[t._v("  "+t._s(t.pollResults)+"\n")])])],1)])])},a=[],c=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container pad-yellow-background pd50"},[e("br"),t._v(" order history: "),e("hr"),e("br"),t._l(t.orderhistory.user.slice().reverse(),(function(n){return e("div",{key:n._id,staticClass:"position-relative"},[t._v(" "+t._s(n.orderInfo.confirmation_code)+" "),n.void?e("h1",[t._v("VOID")]):t._e(),n.void?t._e():e("button",{staticClass:"fl-right",on:{click:function(e){return t.issueVoid(n.payInfo.uniqueTransId)}}},[t._v("void")]),e("br"),e("b",[t._v(t._s(n.email))]),e("br"),n.payInfo.externalTransactionId?[t._v(" debit/credit purchase (id: "+t._s(n.payInfo.externalTransactionId)+") ")]:[t._v(" giftcard purchase ")],e("br"),e("ul",{staticClass:"no-left-pad"},t._l(n.orderInfo.charges.items,(function(o){return e("li",{key:o.cartId,staticStyle:{"margin-bottom":"30px"}},[t._v(" "+t._s(o.name)+" "),e("b",[t._v("$"+t._s(o.price.toFixed()/100))]),t._v(" "),o.returned?[e("span",[t._v("(returned)")])]:[n.void?t._e():e("span",{staticClass:"line-link",on:{click:function(e){return t.issueTokenizedReturn(n.payInfo.uniqueTransId,o.price,o.cartId,n._id)}}},[e("u",[t._v("issue return")])])]],2)})),0),e("br"),e("hr")],2)}))],2)},l=[],u=(e("b680"),e("d3b7"),e("25f0"),{data:function(){return{orderhistory:null,response:null}},name:"OrderHistory",props:["currentUser"],methods:{retrieveOrders:function(){var t=this;this.$http.get("/order/orderhistory/").then((function(n){t.orderhistory=n.data}))},issueTokenizedReturn:function(t,n,e,o){var r=this,s=.101*n,i=n+s,a=i/100,c=a.toFixed(2).toString();console.log(a.toFixed(2).toString()),console.log(c),this.$http.post("/order/issue-tokenized-return",{uniqueTransId:t,amount:c}).then((function(t){console.log(t),r.$http.post("/order/update-refunded-items",{cartId:e,orderId:o}).then((function(t){console.log(t),r.retrieveOrders()})).catch((function(t){console.log("errors"),console.log(t)}))})).catch((function(t){console.log("errors"),console.log(t)}))},issueVoid:function(t){var n=this;console.log(t),this.$http.post("/order/issue-void",{uniqueTransId:t}).then((function(e){console.log(e),n.voidByTransId(t)})).catch((function(t){console.log("errors"),console.log(t)}))},voidByTransId:function(t){var n=this;console.log(t),this.$http.post("/order/void-transid",{uniqueTransId:t}).then((function(t){console.log(t),n.retrieveOrders()})).catch((function(t){console.log("errors"),console.log(t)}))}},mounted:function(){this.retrieveOrders()}}),d=u,v=(e("fc3f"),e("2877")),f=Object(v["a"])(d,c,l,!1,null,null,null),p=f.exports,h=(e("48ac"),{name:"UserProfile",data:function(){return{externalTransactionId:"",pollResults:{}}},components:{AllTransactions:p},methods:{logUserOut:function(){localStorage.removeItem("jwt"),this.$router.push("/")},retrievePoll:function(t){console.log(t);var n=this;this.$http.get("/order/polling-request",{params:{externalTransactionId:t}}).then((function(t){console.log(t),n.pollResults=t})).catch((function(t){console.log(t)}))}}}),g=h,_=(e("6ce5"),Object(v["a"])(g,i,a,!1,null,null,null)),m=_.exports,I={components:{Nav:s["a"],Transactions:m}},b=I,T=(e("93f9"),Object(v["a"])(b,o,r,!1,null,null,null));n["default"]=T.exports},fc3f:function(t,n,e){"use strict";var o=e("7ffc"),r=e.n(o);r.a}}]);
//# sourceMappingURL=chunk-d7183d48.770e676f.js.map